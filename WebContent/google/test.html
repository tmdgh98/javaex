<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
    	let resultAry = [['Dept','Members Dept']];
	    let xhtp = new XMLHttpRequest();
	    xhtp.onreadystatechange = function(){
	    	if(xhtp.readyState == 4 && xhtp.status==200){
	    		let data = xhtp.response;
				  console.log(data);
				  for(let i =0; i<data.length; i++){
					  let iAry = [];
					  for(a in data[i]){
						  iAry.push(a);
						  iAry.push(data[i][a]);
					  }
					  resultAry.push(iAry);
				  }
				  aa(resultAry);
	    		
	    }
	    	google.charts.load('current', {'packages':['corechart']});
    	    google.charts.setOnLoadCallback(drawChart);
				
    	      function aa(ary){
    	    	  function drawChart() {
    					
    	    	        var data = google.visualization.arrayToDataTable([
    	    	            ['Task', 'Hours per Day'],
    	    	            ['일',     11],
    	    	            ['식사',   20],
    	    	            ['노가리',  2],
    	    	            ['TV시청', 2],
    	    	            ['꿈나라',  10]
    	    	          ]);

    	    	        var options = {
    	    	          title: '생활표'
    	    	        };

    	    	        var chart = new google.visualization.PieChart(document.getElementById('piechart'));

    	    	        chart.draw(data, options);
    	    	}
    		   	xhtp.responseType = 'json';
    		    xhtp.open('get','../getMemberPerDept');
    		    xhtp.send();
    		    
    	      
    	        
    	        
    	      }
    	      }
    	     
    </script>
</head>
	
<body>
	<div id="piechart" style="width: 900px; height: 500px;"></div>
</body>
</html>